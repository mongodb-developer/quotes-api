# This configuration file was automatically generated by Gitpod.
# Please adjust to your needs (see https://www.gitpod.io/docs/config-gitpod-file)
# and commit this file to your remote git repository to share the goodness with others.

image:
  file: gitpod-config/.gitpod.Dockerfile
  context: gitpod-config/docker-content

tasks:
  - name: Install dependencies
    init: npm i
  - name: Get a cluster + Seed it with test data + Create Atlas Search Index
    command: |
      MONGODB_CONNECTION_STRING=$(atlas_up)
      sleep 5
      unzip data/quotes.zip -d data
      mongosh $MONGODB_CONNECTION_STRING patterns/_load.js
      patterns/_create-search-index.sh
  - name: Cleanup Atlas Cluster
    command: |
      atlas_cleanup_when_done

vscode:
  extensions:
    - mongodb.mongodb-vscode
    - standard.vscode-standard